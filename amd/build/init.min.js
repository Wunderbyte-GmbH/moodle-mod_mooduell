function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_mooduell/init",["jquery","core/ajax","core/notification"],function(a,b){return{init:function init(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"undefined",h=function(a){var b=window.location.search.substring(1),c=b.split("&"),d,e;for(e=0;e<c.length;e++){d=c[e].split("=");if(d[0]===a){return _typeof(d[1])===void 0?!0:decodeURIComponent(d[1])}}return!1};function c(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"undefined";return function(c){var d=h("id"),c=c;a("#spinner div").removeClass("hidden");a("#highscorestable").addClass("hidden");a("#spinner div").removeClass("hidden");b.call([{methodname:"mod_mooduell_load_highscore_data",args:{quizid:d},done:function done(b){var e="";b.forEach(function(a){e+="<tr><td class=\"text-right\">"+a.rank+"</td><td class=\"text-left\" >"+a.username+"</td><td class=\"text-right\">"+a.gamesplayed+"</td><td class=\"text-right\">"+a.gameswon+"</td><td class=\"text-right\">"+a.gameslost+"</td><td class=\"text-right\">"+a.score+"</td><td class=\"text-right\">"+a.correct+"</td><td class=\"text-right\">"+a.correctpercentage+"%</td></tr>"});a("#highscorestable").html(e);if("teacher"===c){a("#hsdownloadbutton").html("<div style=\"margin-top: 20px;\"><a class=\"btn btn-primary\" href=\"view.php?id="+d+"&action=downloadhighscores\">Download Highscores</a></div>")}a("#spinner div").addClass("hidden");a("#highscorestable").removeClass("hidden")},fail:function fail(){a("#spinner div").addClass("hidden");a("#highscorestable").removeClass("hidden")}}])}(c)}function d(){var c=h("id");a("#spinner div").removeClass("hidden");a("#questionstable").addClass("hidden");a("#spinner div").removeClass("hidden");b.call([{methodname:"mod_mooduell_load_questions_data",args:{quizid:c},done:function done(b){var c="";b.forEach(function(a){var b="no image";if(a.imageurl&&0<a.imageurl.length){b="<a href=\""+a.imageurl+"\"><img src=\""+a.imageurl+"\" alt=\""+a.imagetext+"\" width=\"100px\"></img></a>"}var d=a.length;if(!d||0==d.length){d=a.questiontext.length}var e="<ul>";a.warnings.forEach(function(a){e+="<li><span style=\"color:red;\">"+a.message+"</span></li>"});e+="</ul>";var f="<ul>";a.answers.forEach(function(a){var b=0<a.fraction?" style=\"font-weight:bold\"":"";f+="<li><span"+b+">"+a.answertext+"</span></li>"});f+="</ul>";c+="<tr><td><a href=\"../../question/question.php?returnurl=/question/edit.php?courseid="+a.courseid+"&courseid="+a.courseid+"&id="+a.questionid+"\">"+a.questionid+"</a></td><td>"+b+"</td><td class=\"text-left\">"+a.questiontext+f+"</td><td class=\"text-right\">"+a.questiontype+"</td><td class=\"text-right\">"+d+"</td><td class=\"text-right\">"+a.category+"</td><td class=\"text-right\">"+e+"</td><td class=\"text-right\">"+a.status+"</td></tr>"});a("#questionstable tbody").html(c);a("#spinner div").addClass("hidden");a("#questionstable").removeClass("hidden")},fail:function fail(){a("#spinner div").addClass("hidden");a("#questionstable").removeClass("hidden")}}])}function e(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"undefined";return function(c){var d=h("id"),c=c;a("#spinner div").removeClass("hidden");a("#opengamestable").addClass("hidden");a("#spinner div").removeClass("hidden");b.call([{methodname:"mod_mooduell_load_opengames_data",args:{quizid:d},done:function done(b){var e="";b.forEach(function(a){e+="<tr><td>"+a.playera+"</td><td>"+a.playeraresults+"</td><td>"+a.playerb+"</td><td>"+a.playerbresults+"</td>";if("teacher"===c){e+="<td class=\"text-right\"><a href=\"view.php?action=viewquestions&id="+d+"&gameid="+a.gameid+"\" data-id=\""+a.gameid+"\" data-role=\"viewfield\">view</a>\n                <a href=\"view.php?action=delete&id="+d+"&gameid="+a.gameid+"\" data-id=\""+a.gameid+"\" data-role=\"deletefield\">delete</a></td>"}e+="</tr>"});a("#opengamestable tbody").html(e);a("#spinner div").addClass("hidden");a("#opengamestable").removeClass("hidden")},fail:function fail(){a("#spinner div").addClass("hidden");a("#opengamestable").removeClass("hidden")}}])}(c)}function f(){var c=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"undefined";return function(c){var d=h("id"),c=c;a("#spinner div").removeClass("hidden");a("#finishedgamestable").addClass("hidden");a("#spinner div").removeClass("hidden");b.call([{methodname:"mod_mooduell_load_finishedgames_data",args:{quizid:d},done:function done(b){var e="";b.forEach(function(a){e+="<tr><td>"+a.playera+"</td><td>"+a.playeraresults+"</td><td>"+a.playerb+"</td><td>"+a.playerbresults+"</td>";if("teacher"===c){e+="<td class=\"text-right\"><a href=\"view.php?action=viewquestions&id="+d+"&gameid="+a.gameid+"\" data-id=\""+a.gameid+"\" data-role=\"viewfield\">view</a>\n                <a href=\"view.php?action=delete&id="+d+"&gameid="+a.gameid+"\" data-id=\""+a.gameid+"\" data-role=\"deletefield\">delete</a></td>"}e+="</tr>"});a("#finishedgamestable tbody").html(e);a("#spinner div").addClass("hidden");a("#finishedgamestable").removeClass("hidden")},fail:function fail(){a("#spinner div").addClass("hidden");a("#finishedgamestable").removeClass("hidden")}}])}(c)}a("a[data-toggle=\"tab\"]").on("shown.bs.tab",function(a){var b=a.target.toString();b=b.split("#");if(0==b.length){return}switch(b[1]){case"highscores":c(g);break;case"questions":d();break;case"opengames":e(g);break;case"finishedgames":f(g);break;}});var i=h("gameid");if(i){a("#spinner div").addClass("hidden");a("#questionstable").removeClass("hidden")}}}});
//# sourceMappingURL=init.min.js.map
