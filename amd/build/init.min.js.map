{"version":3,"sources":["../src/init.js"],"names":["define","$","ajax","notification","init","getUrlParameter","sParam","sPageURL","window","location","search","substring","sURLVariables","split","sParameterName","i","length","decodeURIComponent","loadHighScores","id","call","methodname","args","done","res","tablebody","forEach","item","username","gamesplayed","gameswon","gameslost","score","correct","correctpercentage","html","fail","exception","loadQuestions","on","e","tabname","target","toString","alert"],"mappings":"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","sourcesContent":["\n\ndefine(['jquery', 'core/ajax', 'core/notification'], function ($, ajax, notification) {\n\n    return {\n\n\n        init: function () {\n\n            var getUrlParameter = function getUrlParameter(sParam) {\n\n                var sPageURL = window.location.search.substring(1),\n                    sURLVariables = sPageURL.split('&'),\n                    sParameterName,\n                    i;\n\n\n                for (i = 0; i < sURLVariables.length; i++) {\n                    sParameterName = sURLVariables[i].split('=');\n\n                    if (sParameterName[0] === sParam) {\n                        return typeof sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n                    }\n                }\n                return false;\n            };\n\n            function loadHighScores() {\n                var id = getUrlParameter('id');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_highscore_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            tablebody += '<tr>' +\n                                '<td>' + item.username + '</td>' +\n                                '<td class=\"text-right\">' + item.gamesplayed + '</td>' +\n                                '<td class=\"text-right\">' + item.gameswon + '</td>' +\n                                '<td class=\"text-right\">' + item.gameslost + '</td>' +\n                                '<td class=\"text-right\">' + item.score + '</td>' +\n                                '<td class=\"text-right\">' + item.correct + '</td>' +\n                                '<td class=\"text-right\">' + item.correctpercentage + '%</td>' +\n                                '</tr>';\n                        });\n                        $('#highscorestable').html(tablebody);\n                    },\n                    fail: notification.exception\n                }]);\n            }\n\n            function loadQuestions() {\n                var id = getUrlParameter('id');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_question_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            tablebody += '<tr>' +\n                                '<td>' + item.username + '</td>' +\n                                '<td class=\"text-right\">' + item.gamesplayed + '</td>' +\n                                '<td class=\"text-right\">' + item.gameswon + '</td>' +\n                                '<td class=\"text-right\">' + item.gameslost + '</td>' +\n                                '<td class=\"text-right\">' + item.score + '</td>' +\n                                '<td class=\"text-right\">' + item.correct + '</td>' +\n                                '<td class=\"text-right\">' + item.correctpercentage + '%</td>' +\n                                '</tr>';\n                        });\n                        $('#questionstable').html(tablebody);\n                    },\n                    fail: notification.exception\n                }]);\n            }\n\n            $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n\n                var tabname = e.target.toString();\n                tabname = tabname.split('#');\n                if (tabname.length == 0) {\n                    return;\n                }\n                switch (tabname[1]) {\n                    case 'highscores':\n                        loadHighScores();\n                        break;\n                    case 'questions':\n                        loadQuestions();\n                        break;\n                    case 'opengames':\n                        alert('open');\n                        break;\n                }\n            });\n        },\n    };\n});"],"file":"init.min.js"}