{"version":3,"sources":["../src/init.js"],"names":["define","$","ajax","init","role","getUrlParameter","sParam","sPageURL","window","location","search","substring","sURLVariables","split","sParameterName","i","length","decodeURIComponent","loadHighScores","id","removeClass","addClass","call","methodname","args","done","res","tablebody","forEach","item","rank","username","gamesplayed","gameswon","gameslost","score","correct","correctpercentage","html","fail","loadQuestions","image","imageurl","imagetext","strlength","questiontext","warnings","message","answers","style","fraction","answertext","courseid","questionid","questiontype","category","status","loadOpengames","playera","playeraresults","playerb","playerbresults","gameid","loadFinishedgames","on","e","tabname","target","toString"],"mappings":"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","sourcesContent":["\n\ndefine(['jquery', 'core/ajax', 'core/notification'], function ($, ajax) {\n\n    return {\n        init: function (role='undefined') {\n            var getUrlParameter = function getUrlParameter(sParam) {\n                var sPageURL = window.location.search.substring(1),\n                    sURLVariables = sPageURL.split('&'),\n                    sParameterName,\n                    i;\n                for (i = 0; i < sURLVariables.length; i++) {\n                    sParameterName = sURLVariables[i].split('=');\n                    if (sParameterName[0] === sParam) {\n                        return typeof sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);\n                    }\n                }\n                return false;\n            };\n\n            function loadHighScores(role='undefined') {\n                var id = getUrlParameter('id');\n                var role = role;\n\n                $('#spinner div').removeClass('hidden');\n                $('#highscorestable').addClass('hidden');\n\n                var downloadHighscores = '<div style=\"margin-top: 20px;\"><a class=\"btn btn-primary\" href=\"view.php?id=' +\n                    id + '&action=downloadhighscores\">Download Highscores</a></div>';\n\n                $('#spinner div').removeClass('hidden');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_highscore_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            tablebody += '<tr>' +\n                                '<td class=\"text-right\">' + item.rank + '</td>' +\n                                '<td class=\"text-left\" >' + item.username + '</td>' +\n                                '<td class=\"text-right\">' + item.gamesplayed + '</td>' +\n                                '<td class=\"text-right\">' + item.gameswon + '</td>' +\n                                '<td class=\"text-right\">' + item.gameslost + '</td>' +\n                                '<td class=\"text-right\">' + item.score + '</td>' +\n                                '<td class=\"text-right\">' + item.correct + '</td>' +\n                                '<td class=\"text-right\">' + item.correctpercentage + '%</td>' +\n                                '</tr>';\n                        });\n                        $('#highscorestable').html(tablebody);\n\n                        // only show the Download button in teacher view\n                        if (role === 'teacher'){\n                            $('#hsdownloadbutton').html(downloadHighscores);\n                        }\n\n                        $('#spinner div').addClass('hidden');\n                        $('#highscorestable').removeClass('hidden');\n                    },\n                    fail: function () {\n                        $('#spinner div').addClass('hidden');\n                        $('#highscorestable').removeClass('hidden');\n                    }\n                }]);\n            }\n\n            function loadQuestions() {\n                var id = getUrlParameter('id');\n\n                $('#spinner div').removeClass('hidden');\n                $('#questionstable').addClass('hidden');\n\n                $('#spinner div').removeClass('hidden');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_questions_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            var image = 'no image';\n                            if (item.imageurl && item.imageurl.length > 0) {\n                                image = '<a href=\"' + item.imageurl +\n                                    '\"><img src=\"' + item.imageurl + '\" alt=\"' +\n                                    item.imagetext + '\" width=\"100px\"></img></a>';\n                            }\n                            var strlength = item.length;\n                            if (!strlength || strlength.length == 0) {\n                                strlength = item.questiontext.length;\n                            }\n\n                            var warnings = '<ul>';\n                            item.warnings.forEach(item => {\n                                warnings += '<li><span style=\"color:red;\">' + item.message + '</span></li>';\n                            });\n                            warnings += '</ul>';\n\n                            var answers = '<ul>';\n                            item.answers.forEach(item => {\n\n                                var style = item.fraction > 0 ? ' style=\"font-weight:bold\"' : '';\n\n                                answers += '<li><span' + style + '>' + item.answertext + '</span></li>';\n                            });\n                            answers += '</ul>';\n\n                            tablebody += '<tr>' +\n                                '<td><a href=\"../../question/question.php?returnurl=/question/edit.php?courseid='+\n                                item.courseid + '&courseid='+ item.courseid + '&id='+ item.questionid + '\">' +\n                               item.questionid + '</a></td>' +\n                                '<td>' + image + '</td>' +\n                                '<td class=\"text-left\">' + item.questiontext + answers + '</td>' +\n                                '<td class=\"text-right\">' + item.questiontype + '</td>' +\n                                '<td class=\"text-right\">' + strlength + '</td>' +\n                                '<td class=\"text-right\">' + item.category + '</td>' +\n                                '<td class=\"text-right\">' + warnings + '</td>' +\n                                '<td class=\"text-right\">' + item.status + '</td>' +\n                                '</tr>';\n                        });\n                        $('#questionstable tbody').html(tablebody);\n                        $('#spinner div').addClass('hidden');\n                        $('#questionstable').removeClass('hidden');\n                    },\n                    fail: function () {\n                        $('#spinner div').addClass('hidden');\n                        $('#questionstable').removeClass('hidden');\n                    }\n                }]);\n            }\n\n            function loadOpengames(role='undefined') {\n                var id = getUrlParameter('id');\n                var role = role;\n\n                $('#spinner div').removeClass('hidden');\n                $('#opengamestable').addClass('hidden');\n\n                $('#spinner div').removeClass('hidden');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_opengames_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            tablebody += '<tr>' +\n                                '<td>' + item.playera + '</td>' +\n                                '<td>' + item.playeraresults + '</td>' +\n                                '<td>' + item.playerb + '</td>' +\n                                '<td>' + item.playerbresults + '</td>';\n                            if (role === 'teacher'){\n                                tablebody +=\n                                    '<td class=\"text-right\"><a href=\"view.php?action=viewquestions&id=' +\n                                    id + '&gameid=' + item.gameid +\n                                    '\" data-id=\"' + item.gameid +\n                                    '\" data-role=\"viewfield\">view</a>\\n' +\n                                    '                <a href=\"view.php?action=delete&id=' + id + '&gameid=' + item.gameid +\n                                    '\" data-id=\"' + item.gameid + '\" data-role=\"deletefield\">delete</a></td>';\n                            }\n                            tablebody += '</tr>';\n                        });\n                        $('#opengamestable tbody').html(tablebody);\n                        $('#spinner div').addClass('hidden');\n                        $('#opengamestable').removeClass('hidden');\n                    },\n                    fail: function () {\n                        $('#spinner div').addClass('hidden');\n                        $('#opengamestable').removeClass('hidden');\n                    }\n                }]);\n            }\n\n            function loadFinishedgames(role='undefined') {\n                var id = getUrlParameter('id');\n                var role = role;\n\n                $('#spinner div').removeClass('hidden');\n                $('#finishedgamestable').addClass('hidden');\n\n                $('#spinner div').removeClass('hidden');\n                ajax.call([{\n                    methodname: \"mod_mooduell_load_finishedgames_data\",\n                    args: {\n                        'quizid': id\n                    },\n                    done: function (res) {\n                        //$('#continue').attr(\"href\", link);\n                        var tablebody = '';\n\n                        res.forEach(item => {\n                            tablebody += '<tr>' +\n                                '<td>' + item.playera + '</td>' +\n                                '<td>' + item.playeraresults + '</td>' +\n                                '<td>' + item.playerb + '</td>' +\n                                '<td>' + item.playerbresults + '</td>';\n                            if (role === 'teacher') {\n                                tablebody +=\n                                    '<td class=\"text-right\"><a href=\"view.php?action=viewquestions&id=' +\n                                    id + '&gameid=' + item.gameid +\n                                    '\" data-id=\"' + item.gameid + '\" data-role=\"viewfield\">view</a>\\n' +\n                                    '                <a href=\"view.php?action=delete&id=' + id + '&gameid=' + item.gameid +\n                                    '\" data-id=\"' + item.gameid + '\" data-role=\"deletefield\">delete</a></td>';\n                            }\n                            tablebody += '</tr>';\n                        });\n                        $('#finishedgamestable tbody').html(tablebody);\n                        $('#spinner div').addClass('hidden');\n                        $('#finishedgamestable').removeClass('hidden');\n                    },\n                    fail: function () {\n                        $('#spinner div').addClass('hidden');\n                        $('#finishedgamestable').removeClass('hidden');\n                    }\n                }]);\n            }\n\n            $('a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n\n                var tabname = e.target.toString();\n                tabname = tabname.split('#');\n                if (tabname.length == 0) {\n                    return;\n                }\n                switch (tabname[1]) {\n                    case 'highscores':\n                        loadHighScores(role);\n                        break;\n                    case 'questions':\n                        loadQuestions();\n                        break;\n                    case 'opengames':\n                        loadOpengames(role);\n                        break;\n                    case 'finishedgames':\n                        loadFinishedgames(role);\n                        break;\n                }\n            });\n\n            // If we have a gameid param, we can unhide the table\n            var gameid = getUrlParameter('gameid');\n            if (gameid) {\n                $('#spinner div').addClass('hidden');\n                $('#questionstable').removeClass('hidden');\n            }\n\n        },\n    };\n});\n"],"file":"init.min.js"}